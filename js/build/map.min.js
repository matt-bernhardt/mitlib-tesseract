$(function(){var p,e,o,m=new Array,c="",r=mitlib.themeUrl+"/images/";o=document.getElementById("map"),e={center:new google.maps.LatLng(42.35978069999999,-71.09360909999998),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},p=new google.maps.Map(o,e),$("#mapMarkers .location").each(function(){var e=(e=$(this).find(".name").html()).replace("&amp;","&"),o=parseFloat($(this).find(".lat").html()),a=parseFloat($(this).find(".lng").html()),n=$(this).find(".description").html(),t=$(this).find(".id").html(),o=new google.maps.LatLng(o,a),i=(new google.maps.InfoWindow({}),new InfoBox({content:n,disableAutoPan:!1,maxWidth:280,pixelOffset:new google.maps.Size(-140,-181),boxStyle:{opacity:1},closeBoxURL:r+"close-sfw.gif",closeBoxMargin:"4px 4px 4px 4px",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1})),l=new google.maps.MarkerImage(r+"map-marker-active.png"),s=new google.maps.MarkerImage(r+"map-marker-default.png"),g=new google.maps.Marker({position:o,map:p,icon:s,html:n,id:t,title:e});google.maps.event.addListener(g,"click",function(){for(var e=0;e<m.length;e++)m[e].setIcon(s);this.setIcon(l)}),google.maps.event.addListener(g,"click",function(){""!=c&&c.close(),(c=i).open(p,g)}),google.maps.event.addListener(p,"click",function(){i&&(i.close(),g.setIcon(s))}),google.maps.event.addListener(i,"closeclick",function(){g.setIcon(s)}),m.push(g)}),google.maps.event.addListener(p,"idle",function(){jQuery(".gm-style").removeClass("gm-style")}),$(".map").click(function(e){var o=$(this).attr("data-target");for(i=0;i<m.length;i++){var a=m[i];a.id==o&&(p.panTo(a.getPosition()),google.maps.event.trigger(a,"click"))}$("html, body").animate({scrollTop:0},500)}),""!=(o=location.hash.substr(2))&&("map"==o?$("#showMap"):$("a[href='#!"+o+"']")).click()});